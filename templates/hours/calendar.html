{% extends "base.html" %}

{% block links %}
    <link rel="stylesheet" href="/static/calendar/calendar.css?{% now "U" %}">
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script src="/static/calendar/calendar.js?{% now "U" %}"></script>
{% endblock %}

{% block toplinks %}
    {% for organization in organizations %}
        | <a href="{% url 'employee' organization.slug %}"><span class="fa fa-home"></span> {{ organization }}</a>
    {% endfor %}
    {% if user.is_superuser %}
        | <a href="{% url 'calendar' %}"><span class="fa fa-calendar"></span> تقویم</a>
    {% endif %}
{% endblock %}


{% block content %}

    <div id="calendar" class="container number">
        <div class="calender"></div>
        <form action="" method="POST">
            {% csrf_token %}
            <input type="text" id="calenderSelector" name="jalali-date">
            <input type="text" id="calenderSecondarySelector" name="gregorian-date" hidden>
            <input type="text" placeholder="توضیحات" name="description" style="width: 40vmin">
            <input type="submit" value="ثبت" class="btn btn-success float-left submit">
        </form>
        <br>
        <br>
        {% for item in object %}
            <p>{{ item }}</p>
        {% endfor %}
        <p>{{ today }}</p>
    </div>
    <script>


        $(".calender").datepicker({
            altField: "#calenderSelector",
            altSecondaryField: "#calenderSecondarySelector",
            date: "{{ today }}",
        });

        var a = document.querySelectorAll('.day');
        for (var i = 0; i < a.length; i++){
            a[i].addEventListener('click', test, false);
        }

        function test() {
            console.log("hiiii");
            var g_date = document.getElementById('calenderSecondarySelector');
            console.log(g_date.value);
            if ("{{ object }}".indexOf(g_date.value) >= 0){
                console.log('&&&&&');
            }
            console.log("{{ object }}");
        }


    </script>
{% endblock %}